2000-06-22  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-xmas.el (wl-draft-overload-menubar): Override menubar only when
	XEmacs has menubar feature.

2000-06-19  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-demo.el (wl-demo): Don't use `end-of-line' with arg 0.  It
	cannot arrive at the beginning of the buffer under old Emacsen.

2000-06-19  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-address.el (wl-address-ldap-search):
	Call `ldap-search-entries' with `withdn' argument t.
	(wl-complete-field-body): Bind completion-ignore-case as t.
	Clear ldap search hash when it was sole completion.
	Use elmo-string for pattern string.
	(wl-ldap-alias-safe-string): Eliminated needless let.

2000-06-16  Shun-ichi GOTO <gotoh@taiyo.co.jp>

	* wl-address.el (wl-ldap-alias-dn-level): New variable.
	(wl-ldap-alias-sep): New constant.
	(wl-ldap-search-attribute-type-list): Ditto.
	(wl-ldap-get-value): New function.
	(wl-ldap-make-filter): Ditto.
	(wl-ldap-make-matched-value-list): Ditto.
	(wl-ldap-alias-safe-string): Ditto.
	(wl-ldap-register-dn-string): Ditto.
	(wl-address-ldap-search): Rewrite.

2000-06-17  Masahiro MURATA  <muse@ba2.so-net.ne.jp>

	* wl-thread.el (wl-thread-delete-msgs): Fixed problem when closed
	thread is deleted.
	(wl-thread-delete-line-from-buffer): Ditto.
	(wl-thread-get-exist-children): New function.

2000-06-15  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-demo.el (wl-demo): Made it to select various image types.
	(wl-logo-bitmap, wl-logo-xbm, wl-logo-xpm): Renamed and divided
	from `wl-title-logo'.
	(wl-logo-ascii): New variable.
	(TopLevel): Require `wl-highlight'; no need to require `wl-xmas'.
	(wl-demo-copyright-notice): New constant.

	* wl-vars.el (wl-demo-display-logo): Made it can be a image type.

2000-06-15  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-vars.el (wl-summary-target-above): Renamed from
	wl-summary-temp-above.
	* wl-score.el (wl-score-get-score-alist): Use it.
	(wl-summary-score-update-all-lines): Use it.
	* wl-summary.el: Ditto. (make-variable-buffer-local).

2000-06-15  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-ldap-port): New user option.

	* wl-address.el (wl-address-ldap-search): Renamed from wl-ldap-search.
	Rewite whole implementation.
	(wl-complete-field-body): Fixed.

2000-06-14  Yuuichi Teranishi  <teranisi@quickhack.net>

	* wl-address.el (wl-ldap-search-internal): Renamed to `wl-ldap-search'.
	Choose implementation at compile time.

2000-06-13  Takeshi Chiba <chiba@d3.bs1.fc.nec.co.jp>

	* wl-address.el (wl-ldap-search-internal): New function.
	(wl-complete-field-to): Use it.

2000-06-12  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-address.el (wl-ldap-search): Use `with-temp-buffer'.
	Use `let' instead of `let*'.
	Require 'wl-vars.

	* wl-vars.el (wl-ldap-server): Moved from wl-address.el.
	Define as defcustom.
	(wl-ldap-base): Ditto.
	(wl-use-ldap): Ditto.

2000-06-09  Takeshi Chiba <chiba@d3.bs1.fc.nec.co.jp>

	* wl-address.el (wl-ldap-search): New function.
	(wl-complete-field-body): Use `wl-ldap-search'.
	(wl-ldap-server): New variable.
	(wl-ldap-base): Ditto.
	(wl-use-ldap): Ditto.

2000-06-08  OKAZAKI Tetsurou  <okazaki@be.to>

	* wl-score.el (wl-score-guess-like-gnus): Use `elmo-string'
	(Pointed out by Mito <mit@nines.nec.co.jp>).
	* wl-summary.el (wl-summary-redisplay-no-mime): Update
	buffer-local variables like `wl-summary-redisplay-internal'.
	(wl-summary-redisplay-all-header): Likewise.  Update
	Summary view too.

2000-06-05  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-jump-to-parent-message):
	Consider prefix argument.

	* wl-thread.el (wl-thread-update-line-msgs): Fixed problem
	when closed thread is deleted.

2000-05-31  Yasushi ABE <yasushi@stbbs.net>

	* wl-summary.el (wl-summary-jump-to-parent-message):
	Consider thread modification.

2000-06-03  OKAZAKI Tetsurou  <okazaki@be.to>

	* wl-message.el (wl-message-normal-get-original-buffer): Use
	`save-excursion'.

	* wl-vars.el (wl-smtp-posting-server): Customization Type fix.
	(wl-summary-showto-folder-regexp): Ditto.

2000-05-31  OKAZAKI Tetsurou  <okazaki@be.to>

	* wl-util.el (wl-delete-alist): Doc fix.
	(wl-delete-associations): New function.
	(wl-inverse-alist): New function.
	* wl-summary.el (wl-summary-exec-subr): Rename parameters.
	Split temporary variables. Use `wl-delete-associations'
	and `wl-inverse-alist'.
	(wl-summary-delete-copy-marks-on-buffer): Rename the parameter.

2000-05-30  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-folder.el (wl-folder-prefetch-entity):
	Execute prefetching if new count is unknown.

2000-05-27  Masahiro MURATA  <muse@ba2.so-net.ne.jp>

	* wl-vars.el (wl-summary-insert-headers-hook): New variable.

	* wl-thread.el (wl-thread-cleanup-symbols): If entity is exists,
	delete entity.
	(wl-thread-set-parent): If insert as top, set linked as nil.

	* wl-summary.el (wl-summary-delete-messages-on-buffer): Call
	`wl-thread-cleanup-symbols' when view mode is thread.

2000-05-26  OKAZAKI Tetsurou  <okazaki@be.to>

	* wl-folder.el (wl-folder-create-folder-entity): Use
	with-current-buffer.
	(wl-local-folder-init): Call set-buffer to make sure we are in
	the Folder buffer. Don't touch buffer-local variables here.
	(wl-folder-mode): Initialize buffer-local variables here.

	* wl-folder.el (wl-folder-get-path): Use let instead of let*.
	(wl-folder-entity-assign-id): Ditto.
	(wl-folder-create-entity-hashtb): Ditto.
	(wl-local-folder-init): Ditto.
	(wl-folder-create-group-alist): Initialize `cur-alist' with let.

2000-05-24  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-summary.el (wl-summary-default-from): Fix probrem when
	std11-extract-address-components return (nil "foo@bar").

2000-05-24  OKAZAKI Tetsurou  <okazaki@be.to>

	* wl-draft.el (wl-draft-clone-local-variables):
	Remove redundant `setq'.

2000-05-19  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-draft.el (wl-draft-yank-from-mail-reply-buffer):
	Bind wl-highlight-x-face-func as nil while highlighting header.

2000-05-21  OKAZAKI Tetsurou  <okazaki@be.to>

	* wl-folder.el (wl-folder-buffer-cur-path): Make buffer-local.

2000-05-21  Masahiro MURATA  <muse@ba2.so-net.ne.jp>

	* wl-summary.el (wl-summary-switch-to-clone-buffer): Remove
	elmo-msgdb-overview-hashtb from copy-variables.
	(wl-summary-refile-subr): Use `elmo-msgdb-overview-get-entity'
	instead of `elmo-msgdb-overview-get-entity-by-number'.
	(wl-summary-auto-refile): Ditto.

	* wl-thread.el (wl-thread-update-line-on-buffer-sub): Use
	`elmo-msgdb-overview-get-entity' instead of
	`elmo-msgdb-search-overview-entity'.  Use
	`elmo-msgdb-overview-get-entity' instead of
	`elmo-msgdb-overview-get-entity-by-number'.
	(wl-thread-insert-entity-sub): Ditto.
	(wl-thread-insert-message): Ditto.

	* wl-message.el (wl-mmelmo-message-redisplay): Change argument of
	`elmo-msgdb-overview-get-entity'.
	(wl-normal-message-redisplay): Ditto.

2000-05-20  Masahiro MURATA  <muse@ba2.so-net.ne.jp>

	* wl-thread.el (wl-thread-cleanup-symbols): Fix delete entity from
	`wl-thread-entities'.
	(wl-thread-delete-message): Fix remove top message from
	`wl-thread-entity-list'.

	* wl-summary.el (wl-summary-delete-messages-on-buffer): Don't use
	wl-append(nconc), because update-list is broken on Meadow.

	* wl-summary.el (wl-summary-insert-thread-entity): Changed delayed
	updating process.
	(wl-summary-rescan): Ditto.
	(wl-summary-sync-update3): Ditto.
	* wl-thread.el (wl-thread-set-parent): Renamed from
	`wl-summary-set-parent'.
	(wl-thread-insert-message): Updating buffer faster.
	(wl-thread-delete-message): Updating buffer faster.

	* wl-score.el (wl-summary-score-update-all-lines): Changed
	interval for display progress gauge.

2000-05-19  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-vars.el (wl-summary-always-sticky-folder-list): `t' means all
	folder always-sticky.
	* wl-summary.el (wl-summary-always-sticky-folder-p): defun instead of
	defmacro.

2000-05-18  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-draft-add-references): New user option.

	* wl-draft.el (wl-draft-add-references): New function.
	(wl-draft-yank-from-mail-reply-buffer): Use it.
	(wl-draft-insert-current-message): Bind `wl-draft-add-references'
	as nil.

2000-05-12  Masahiro MURATA  <muse@ba2.so-net.ne.jp>

	* wl-thread.el (wl-thread-update-line-msgs): Called
	`wl-thread-update-line-on-buffer-sub'.
	(wl-thread-update-line-on-buffer): Delete routine of inserting
	thread.
	(wl-thread-update-line-on-buffer-sub): Routine of inserting thread
	moved from `wl-thread-update-line-on-buffer'.
	Add threshold for displaying progress gauge.
	* wl-summary.el (wl-summary-delete-messages-on-buffer): Change
	argument of `wl-thread-update-line-msgs'.
	Add threshold for displaying progress gauge.
	* wl-folder.el:
	Add threshold for displaying progress gauge.
	* wl-score.el: Ditto.

	* wl-expire.el (wl-summary-expire): Display deleting info.

2000-05-12  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-thread.el (wl-thread-update-line-msgs): Added optional argument
	`no-msg'.
	* wl-summary.el (wl-summary-delete-messages-on-buffer): Set no-msg
	argument of `wl-thread-update-line-msgs'.
	(wl-summary-set-parent): Added optional argument `parent-number'.
	(wl-summary-buffer-saved-message): New buffer local variable.
	(wl-summary-save-current-message): New command.
	(wl-summary-yank-saved-message): Ditto.
	(wl-summary-mode-map): Added key binding for
	`wl-summary-save-current-message' (\ew) and
	`wl-summary-yank-saved-message' (\C-y).
	(wl-summary-yank-saved-message): Inhibit setting itself as a parent.

2000-05-11  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-mode-map): Added key binding for
	`wl-summary-set-parent' (ts).

2000-05-10  Masahiro MURATA  <muse@ba2.so-net.ne.jp>

	* wl-summary.el (wl-summary-insert-thread-entity): Search same
	subject faster. If thread number is reverse, delayed updating
	thread.
	(wl-summary-search-by-subject): Ditto.
	(wl-summary-put-alike): Ditto.
	(wl-summary-get-alike): Ditto.
	(wl-summary-insert-headers): Insert header of all overview in
	buffer.
	(wl-summary-rescan): Delayed updating thread. Kill search subject
	buffer for wl-summary-search-by-subject.
	(wl-summary-sync-update3): Ditto.
	(wl-summary-exit): Ditto.
	(wl-summary-goto-bottom-of-current-thread): Change for linked
	thread.
	(wl-summary-overview-create-summary-line): Change line for linked
	thread.

	* wl-summary.el (wl-summary-update-thread): Use
	wl-thread-maybe-get-children-num.
	(wl-summary-set-parent): If change parent, move sub thread.
	(wl-summary-redisplay-internal): Add horizontal recenter.
	(wl-summary-redisplay-no-mime): Add horizontal recenter.

	* wl-thread.el (wl-thread-entity-get-linked): New function.
	(wl-thread-entity-set-linked): New function.
	(wl-thread-create-entity): Add linked element.
	(wl-thread-entity-insert-as-top): Use wl-append.
	(wl-thread-maybe-get-children-num): If closing thread, return
	children msgs.
	(wl-thread-update-line-msgs): Displaying progress message.
	(wl-thread-update-line-on-buffer-sub): Use
	wl-thread-maybe-get-children-num.
	(wl-thread-update-line-on-buffer): If update line is not exists,
	insert thread.
	(wl-thread-delete-message): If delete top msg of thread, search
	parent by subject.
	(wl-thread-insert-entity): Use
	wl-thread-maybe-get-children-num.

	* wl-highlight.el (wl-highlight-summary-current-line): change
	sregexp for linked thread.
	* wl-util.el (wl-count-lines): Count lines.
	(wl-horizontal-recenter): horizontal recenter.
	* wl-score.el (wl-score-put-alike): Use wl-count-lines
	(wl-score-get-alike): Ditto.
	* wl-vars.el (wl-summary-search-parent-by-subject-regexp): Changed.
	(wl-subject-length-limit): New variable.
	(wl-highlight-thread-indent-string-regexp): Changed for linked
	thread.

2000-05-10  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-summary-search-parent-by-subject-regexp):
	New variable (revival).
	* wl-summary.el (wl-summary-insert-thread-entity): Search parent
	by subject matching if there's no in-reply-to nor references field
	(revival).


2000-05-10  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-thread.el (wl-thread-close-all): Fixed typo in display-progress
	message.

2000-05-09  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-reply): Return t if there was a
	message at cursor point.
	Added unwind-protect.
	(wl-summary-reply-with-citation): Cite only when wl-summary-reply
	returns t.
	(wl-summary-cancel-message): Do nothing when there's no message at
	cursor point.
	(wl-summary-forward): Ditto.
	(wl-summary-jump-to-parent-message): Ditto.
	(wl-summary-reedit): Ditto.
	(wl-summary-edit-addresses): Ditto.
	(wl-summary-pipe-message): Ditto.
	(wl-summary-print-message-with-ps-print): Ditto.
	(wl-summary-print-message): Ditto.
	(wl-summary-mark-as-important): Ditto.
	(wl-summary-mark-as-unread): Ditto.

	* wl-summary.el (wl-summary-reply): Cause an error when there's no
	message at cursor point.
	(wl-summary-reply-with-citation): Remove unwind-protect.

	* wl-summary.el (wl-summary-insert-thread-entity): Eliminated
	subject searching feature.
	* wl-vars.el (wl-summary-search-parent-by-subject-regexp):
	Eliminated.

2000-04-28  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-summary-search-parent-by-subject-regexp):
	New variable.
	* wl-summary.el (wl-summary-insert-thread-entity): Search parent
	by subject matching if there's no in-reply-to nor references field.

	* wl-summary.el (wl-summary-set-parent): New command (No key binding).

	* wl-folder.el (wl-folder-insert-entity): Remove progress gauge
	when display is finished.
	(wl-folder-open-all): Ditto.
	(wl-folder-update-access-group): Ditto.
	* wl-summary.el (wl-summary-delete-messages-on-buffer): Ditto.
	* wl-thread.el (wl-thread-close-all): Ditto.

	* wl-summary.el (wl-summary-delete-messages-on-buffer): Remove
	progress gauge only when it was displayed.
	* wl-folder.el (wl-folder-insert-entity): Ditto.

2000-04-26  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-incorporate): Enclose
	`wl-summary-sync-force-update' with save-excursion.

2000-04-21  Yuuichi Teranishi  <teranisi@elmo.dq.isl.ntt.co.jp>

	* wl-summary.el (wl-summary-prefetch-region):
	Pass current cursor point to `pos-visible-in-window-p' after
	moving cursor to the started point.

2000-04-20  Katsumi Yamaoka    <yamaoka@jpl.org>

	* wl-vars.el (wl-ignored-forwarded-headers): New user option.

	* wl-draft.el (wl-draft-insert-current-message): Delete useless
	fields from the forwarding message.
	(wl-draft-yank-from-mail-reply-buffer): Allow the optional argument
	`ignored-fields'.

2000-04-20  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-mime.el (wl-message-request-partial):
	Eliminated argument `msgdb'.
	Don't pass `msgdb' argument to `elmo-read-msg-no-cache'.
	(wl-mime-combine-message/partial-pieces): Likewise.
	* tm-wl.el (wl-message-request-partial): Likewise.
	(wl-mime-combine-message/partial-pieces): Likewise.

2000-04-17  Yoshiki Hayashi  <yoshiki@xemacs.org>

	* wl-summary.el (wl-summary-sync-marks): Remove progress gauge
	when display is finished.

2000-04-17  HARAGUCHI Shuugou <haraguti@nd.net.fujitsu.co.jp>

	* wl-summary.el (wl-summary-goto-folder-subr):
	Fix problem when wl-summary-partial-highlight-above-lines is nil.

2000-04-18  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-prefetch-region): Redisplay only
	when cursor point is visible.

2000-04-15  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-expire.el (wl-expire-archive-get-max-number):
	Don't use `file-name-directory'.

2000-04-14  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-expire.el (wl-expire-archive-get-max-number):
	Use `file-name-directory'.

2000-04-13  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-sync-marks): Re-display progress
	only when there is progress.

2000-04-13  Mito <mit@nines.nec.co.jp>

	* wl-summary.el (wl-summary-sync-marks): Display progress.

2000-04-13  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-move-cached-regex): Eliminated.
	(wl-summary-prev): Move cursor regardless of unread status.
	(wl-summary-next): Ditto.

2000-04-10  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-mime.el (wl-summary-burst-subr): Renamed from `wl-burst'.
	Added argument `target' and `number'.
	* tm-wl.el (wl-summary-burst-subr): New function.
	(wl-summary-burst): Use it.

2000-04-10  Mito <mit@nines.nec.co.jp>

	* wl-mime.el (wl-burst): New function.
	(wl-summary-burst): Use it.

2000-04-07  A. SAGATA <sagata@nttvdt.hil.ntt.co.jp>

	* wl-address.el (wl-address-petname-add-or-change): Use e-mail address
	as petname when there's no candidate.

2000-04-07  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-vars.el (wl-fldmgr-add-complete-with-current-folder-list):
	New variable.
	* wl-fldmgr.el (wl-fldmgr-add): Use it.

	* wl.el (wl-plugged-init): Flush queues if started with plugged status.

	* wl-folder.el (wl-folder-flush-queue): Flush operation queue too.

2000-04-05  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-refile.el (wl-refile-expand-newtext): Add `original' argument.
	Use substring of `original' instead of buffer-substring.
	(wl-refile-evaluate-rule):
	Set `original' argument of wl-refile-expand-newtext.

	* wl-summary.el
	(wl-summary-auto-refile-check-refile-rule-alist-subr,
	wl-summary-auto-refile-check-refile-rule-alist): Eliminated.
	(wl-summary-auto-refile): Check existence of destination folder just
	before marking.

2000-04-05  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* wl-refile.el (wl-refile-evaluate-rule): Fixed problem
	when wl-refile-get-field-value return nil.

2000-04-04   Daiki Ueno  <ueno@unixuser.org>

	* wl-refile.el
	(wl-refile-expand-newtext): New function imported from Gnus.
	(wl-refile-evaluate-rule): Use it.

2000-04-04  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-summary.el (wl-summary-print-destination):
	Duplicate folder string to avoid putting text-property on
	original string.

	* wl-refile.el (wl-refile-get-field-value): New function.
	(wl-refile-evaluate-rule): New function;
	Evaluate refile rule recursively.
	(wl-refile-guess-by-rule): Use wl-refile-evaluate-rule.
	* wl-summary.el (wl-summary-auto-refile-check-refile-rule-alist-subr):
	New function; Check existence of a target folder recursively.
	(wl-summary-auto-refile-check-refile-rule-alist):
	Use wl-summary-auto-refile-check-refile-rule-alist-subr.

2000-03-30  Yuuichi Teranishi  <teranisi@gohome.org>

	* wl-demo.el (wl-title-logo): Refer wl-icon-dir.

	* wl-folder.el (wl-create-folder-entity-from-buffer):
	Fixed problem when '}' character is contained in folder name.

	* wl-xmas.el (wl-make-modeline): Consider plugged status.

2000-03-29  Daiki Ueno <ueno@kiss.kake.info.waseda.ac.jp>

	* wl-fldmgr.el (wl-fldmgr-add-completion-hashtb): New variable.
	(wl-fldmgr-add-completion-all-completions):
	Use wl-fldmgr-add-completion-hashtb.

2000-03-28  Daiki Ueno <ueno@kiss.kake.info.waseda.ac.jp>

	* wl-fldmgr.el (wl-fldmgr-add-completion-all-completions,
	wl-fldmgr-add-completion-subr):	New functions.
	* wl-folder.el (wl-folder-completion-func): New variable.
	* wl-summary.el (wl-summary-read-folder):
	Use wl-folder-completion-func.

	* wl-refile.el: Eliminate throw & catch.

	* wl.el (wl-plugged-sending-queue-status): Fixed.

2000-03-27  Mikio Nakajima <minakaji@osaka.email.ne.jp>

	* wl-draft.el (wl-draft): Put category property on
	mail-header-separator.
